#!/bin/bash

echo "๐ ะะฐะฟััะบ DrAsya ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ..."

# ะัะพะฒะตััะตะผ, ััะพ Docker ะทะฐะฟััะตะฝ
if ! docker info > /dev/null 2>&1; then
    echo "โ Docker ะฝะต ะทะฐะฟััะตะฝ. ะะพะถะฐะปัะนััะฐ, ะทะฐะฟัััะธัะต Docker ะธ ะฟะพะฟัะพะฑัะนัะต ัะฝะพะฒะฐ."
    exit 1
fi

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ัััะตััะฒัััะธะต ะบะพะฝัะตะนะฝะตัั
echo "๐ ะััะฐะฝะพะฒะบะฐ ัััะตััะฒัััะธั ะบะพะฝัะตะนะฝะตัะพะฒ..."
docker-compose down

# ะะฐะฟััะบะฐะตะผ ะฒัะต ัะตัะฒะธัั
echo "๐ณ ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ..."
docker-compose up -d

# ะะดะตะผ ะณะพัะพะฒะฝะพััะธ ัะตัะฒะธัะพะฒ
echo "โณ ะะถะธะดะฐะฝะธะต ะณะพัะพะฒะฝะพััะธ ัะตัะฒะธัะพะฒ..."
sleep 15

# ะัะพะฒะตััะตะผ ััะฐััั
echo "๐ ะกัะฐััั ัะตัะฒะธัะพะฒ:"
docker-compose ps

echo ""
echo "๐ ะัะธะปะพะถะตะฝะธะต ะทะฐะฟััะตะฝะพ!"
echo ""
echo "๐ ะะพัััะฟะฝัะต ัะตัะฒะธัั:"
echo "   ๐ ะคัะพะฝัะตะฝะด: http://localhost:80 (ัะตัะตะท nginx)"
echo "   ๐ง API Backend: http://localhost:80/api"
echo "   ๐ ะััะผะพะน ะดะพัััะฟ ะบ API: http://localhost:3000/api"
echo "   ๐ค Bot API: http://localhost:8000"
echo ""
echo "๐ ะะปั ะพััะฐะฝะพะฒะบะธ: docker-compose down"
echo "๐ ะะปั ะฟัะพัะผะพััะฐ ะปะพะณะพะฒ: docker-compose logs -f [service_name]"
echo "๐ ะะปั ะฟะตัะตะทะฐะฟััะบะฐ: docker-compose restart [service_name]"


