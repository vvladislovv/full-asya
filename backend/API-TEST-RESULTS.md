# üß† DrAsya Backend API - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ **–°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –ò–ù–¢–ï–ì–†–ê–¶–ò–ò**

### üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**

**‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–Æ–©–ò–ï –ú–û–î–£–õ–ò:**
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - JWT —Ç–æ–∫–µ–Ω—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ **Health Check** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–í–æ–ø—Ä–æ—Å—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ä–º –∏ –∞–Ω–∫–µ—Ç
- ‚úÖ **–¢–µ—Å—Ç—ã** - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **–≠—Ç–∞–ø—ã —Ç–µ—Å—Ç–æ–≤** - 5-—ç—Ç–∞–ø–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ **–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏** - –∑–∞–ø–∏—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º
- ‚úÖ **–ü—Ä–∞–∫—Ç–∏–∫–∏** - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

**üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø):**
- ‚úÖ JWT Authentication –Ω–∞ –≤—Å–µ—Ö endpoints
- ‚úÖ Rate limiting (10-200 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω)
- ‚úÖ Security headers (CSP, HSTS, XSS Protection)
- ‚úÖ Input sanitization –ø—Ä–æ—Ç–∏–≤ –∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ RBAC (—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
- ‚úÖ Audit logging –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**üåç –ú–£–õ–¨–¢–ò–Ø–ó–´–ß–ù–û–°–¢–¨:**
- ‚úÖ –†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –æ—à–∏–±–æ–∫ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö API –æ—Ç–≤–µ—Ç–æ–≤

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

#### ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∏–µ API Endpoints (200 OK):**
```
GET  /health                                    ‚úÖ
GET  /auth/profile                             ‚úÖ
GET  /users                                    ‚úÖ
GET  /users/:id                                ‚úÖ
GET  /dementia-screening/questions             ‚úÖ
GET  /dementia-screening/my                    ‚úÖ
GET  /emotional-state/questions                ‚úÖ
GET  /emotional-state/my                       ‚úÖ
GET  /tests/list/available                     ‚úÖ
GET  /test-stages/test-type/:type              ‚úÖ
GET  /history                                  ‚úÖ
GET  /history/stats                            ‚úÖ
GET  /consultations/my                         ‚úÖ
GET  /consultations/slots/available            ‚úÖ
GET  /practices                                ‚úÖ
GET  /practices/recommendations                ‚úÖ
GET  /users/stats                              ‚úÖ
```

#### ‚ö†Ô∏è **–¢—Ä–µ–±—É—é—â–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (500 Internal Error):**
```
POST /dementia-screening                       ‚ö†Ô∏è (JSON validation)
POST /emotional-state/assess                   ‚ö†Ô∏è (JSON validation)
POST /test-scoring/calculate                   ‚ö†Ô∏è (calculation error)
```

### üóÇÔ∏è **–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**

| –¢–∏–ø | Telegram ID | Username | isAdmin | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------------|----------|---------|----------|
| User | 377920598 | user_377920598 | false | –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| User | 987654321 | user_987654321 | false | –í—Ç–æ—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| Admin | 111111111 | admin | true | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä |

### üì¶ **Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è:**

**–§–∞–π–ª:** `postman/DrAsya-Backend-API-Updated.postman_collection.json`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π JWT —Ç–æ–∫–µ–Ω** - –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –ª–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ **Pre-request —Å–∫—Ä–∏–ø—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ **Tests** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** - –≤—Å–µ API endpoints

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ Postman
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `base_url = http://localhost:3000`
3. –í—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `current_telegram_id`:
   - `377920598` - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - `111111111` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
4. JWT —Ç–æ–∫–µ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### üöÄ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π:**

| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –ü–æ–∫—Ä—ã—Ç–∏–µ API | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å |
|--------|--------|--------------|--------------|------------------|
| Authentication | ‚úÖ 100% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |
| Users | ‚úÖ 100% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |
| Dementia Screening | ‚ö†Ô∏è 90% | ‚ö†Ô∏è Minor issues | ‚úÖ Maximum | ‚úÖ Full |
| Emotional State | ‚ö†Ô∏è 90% | ‚ö†Ô∏è Minor issues | ‚úÖ Maximum | ‚úÖ Full |
| Tests | ‚úÖ 95% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |
| Test Stages | ‚úÖ 100% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |
| Test Scoring | ‚ö†Ô∏è 85% | ‚ö†Ô∏è Calculation fix needed | ‚úÖ Maximum | ‚úÖ Full |
| History | ‚úÖ 100% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |
| Consultations | ‚úÖ 100% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |
| Practices | ‚úÖ 100% | ‚úÖ Complete | ‚úÖ Maximum | ‚úÖ Full |

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (localhost:5432)
- ‚úÖ Prisma ORM –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ Redis —Ä–∞–±–æ—Ç–∞–µ—Ç (localhost:6379)
- ‚úÖ –ö—ç—à –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ TTL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: 300 —Å–µ–∫—É–Ω–¥

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ Connection pooling (13 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- ‚úÖ Optimized queries
- ‚úÖ Response compression
- ‚úÖ Memory usage: 59% (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

### üìã **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

**–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (5% –æ—Å—Ç–∞–≤—à–µ–π—Å—è —Ä–∞–±–æ—Ç—ã):**

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON** (30 –º–∏–Ω—É—Ç):
   - Dementia screening responses
   - Emotional assessment responses
   - Test scoring calculations

2. **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (15 –º–∏–Ω—É—Ç):
   - –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω –≤—Å–µ—Ö endpoints
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ edge cases
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (15 –º–∏–Ω—É—Ç):
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Swagger
   - –§–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

### üéâ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: 95%**

**‚úÖ –ì–æ—Ç–æ–≤–æ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
- API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è
- Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞

**‚úÖ –ì–æ—Ç–æ–≤–æ –¥–ª—è Telegram –±–æ—Ç–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ API
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–∫–µ—Ç—ã
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤

**‚úÖ –ì–æ—Ç–æ–≤–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –í—Å–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Monitoring –∏ health checks
- Error handling
- Performance optimization

---

## üìû **–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

**Base URL:** `http://localhost:3000`
**API Docs:** `http://localhost:3000/api/docs`
**Health:** `http://localhost:3000/health`

**Test Script:** `./scripts/test-all-endpoints.sh`
**Postman Collection:** `postman/DrAsya-Backend-API-Updated.postman_collection.json`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï!**