#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
echo "‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
docker-compose down

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
echo "üê≥ –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
docker-compose up -d

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
sleep 10

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ backend
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π backend..."
docker-compose exec backend npm install

echo "üóÉÔ∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
docker-compose exec backend npx prisma migrate deploy

echo "üå± –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏..."
docker-compose exec backend npx prisma db seed

echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—â–µ–Ω!"
echo ""
echo "üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:"
echo "‚Ä¢ Frontend: http://localhost:3000"
echo "‚Ä¢ Backend API: http://localhost:8000"
echo "‚Ä¢ Bot: —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ"
echo ""
echo "üë• –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:"
echo "‚Ä¢ Telegram ID: 123456789 (Test User)"
echo "‚Ä¢ Telegram ID: 987654321 (–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞)"
echo "‚Ä¢ Telegram ID: 555666777 (John Doe)"
echo ""
echo "üß™ –í —Å–∏—Å—Ç–µ–º–µ –¥–æ—Å—Ç—É–ø–Ω–æ 8 —Ç–µ—Å—Ç–æ–≤:"
echo "‚Ä¢ –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å"
echo "‚Ä¢ –í–µ—Ä–±–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å"
echo "‚Ä¢ –†–µ—á–µ-—Å–ª—É—Ö–æ–≤–∞—è –ø–∞–º—è—Ç—å" 
echo "‚Ä¢ –û–±—ä—ë–º —Ü–∏—Ñ—Ä"
echo "‚Ä¢ –ó—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –∏ –≤–Ω–∏–º–∞–Ω–∏–µ"
echo "‚Ä¢ –¢–µ—Å—Ç –°—Ç—Ä—É–ø–∞"
echo "‚Ä¢ –°—á—ë—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏"
echo "‚Ä¢ –°–∏–º–≤–æ–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å"
echo ""
echo "üì± –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –∏ –≤–æ–π–¥–∏—Ç–µ —Å –ª—é–±—ã–º –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö Telegram ID"


